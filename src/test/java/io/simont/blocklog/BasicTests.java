package io.simont.blocklog;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

public class BasicTests {

    SecureLog log;

    @Before
    public void before() throws Exception {
        log = new SecureLog("/opt/test.log");

    }

    @After
    public void after() throws Exception {
        log.close();
    }

    @Test
    public void One() throws Exception {

        log.add("1987234912673509193579159719375109345797073547234875");
        log.add("2987234912673509193579159719375109345797073547234875");
        log.add("3987234912673509193579159719375109345797073547234875");
        log.add("4987234912673509193579159719375109345797073547234875");
        log.add("5987234912673509193579159719375109345797073547234875");
        log.add("6987234912673509193579159719375109345797073547234875");
        log.add("7987234912673509193579159719375109345797073547234875");
        log.add("8987234912673509193579159719375109345797073547234875");
        log.add("9987234912673509193579159719375109345797073547234875");
        log.add("A987234912673509193579159719375109345797073547234875");

        log.dump();

        Assert.assertTrue(log.isValid());

    }

    @Test
    public void Two() throws Exception {

        for( int i=0; i<1024; i++) {
            log.add("012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789");
        }

        log.dump();

        Assert.assertTrue(log.isValid());

    }
}
